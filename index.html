<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Now you see me</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Fonts: Tech Mono and VT323 for that terminal feel -->
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=VT323&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Color Palette: Monochrome + TikTok Glitch Colors */
            --main-color: #ffffff;
            --secondary-color: #888888;
            --dark-bg: #050505;
            --glass: rgba(255, 255, 255, 0.05);
            --glitch-red: #FF0050;
            --glitch-cyan: #00F2EA;
            --bg-gradient: radial-gradient(circle at center, #1a1a1a 0%, #000000 100%);
        }

        body {
            margin: 0;
            overflow-x: hidden;
            background-color: var(--dark-bg);
            color: var(--main-color);
            font-family: 'Share Tech Mono', monospace;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #000;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border: 1px solid var(--main-color);
        }

        /* Background Canvas */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: var(--bg-gradient);
            transition: background 0.5s ease;
        }

        /* --- THEMES & LAYOUT OVERRIDES --- */

        /* 1. COOL (Default) - Uses standard Tailwind classes in HTML */

        /* 2. COMIC THEME */
        body.theme-comic {
            --main-color: #000000;
            --secondary-color: #333333;
            --dark-bg: #ffffff;
            --glass: rgba(255, 255, 255, 0.95);
            --glitch-red: #ff0055;
            --glitch-cyan: #0099ff;
            --bg-gradient: repeating-linear-gradient(45deg,
                    #ffffff,
                    #ffffff 10px,
                    #f0f0f0 10px,
                    #f0f0f0 20px);
        }

        /* Comic Layout Overrides */
        body.theme-comic .container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            padding: 2rem;
            border: 4px solid #000;
            background: #fff;
            box-shadow: 15px 15px 0px rgba(0, 0, 0, 0.2);
            max-width: 95%;
        }

        @media (min-width: 1024px) {
            body.theme-comic .container {
                grid-template-columns: 1fr 1fr;
                grid-template-areas:
                    "nav nav"
                    "hero projects"
                    "contact projects";
                align-items: start;
            }

            body.theme-comic nav {
                grid-area: nav;
                border-bottom: 4px solid #000;
                padding-bottom: 1rem;
                margin-bottom: 0 !important;
            }

            body.theme-comic #hero {
                grid-area: hero;
                border-right: 4px solid #000;
                padding-right: 2rem;
                height: 100%;
                justify-content: start;
                padding-top: 2rem;
            }

            body.theme-comic #projects {
                grid-area: projects;
                padding-left: 2rem;
                padding-top: 2rem;
            }

            body.theme-comic #contact {
                grid-area: contact;
                border-top: 4px solid #000;
                border-right: 4px solid #000;
                padding: 2rem;
                margin-bottom: 0;
            }

            /* Hide binary text in comic mode to clean up layout */
            body.theme-comic #binary-text-container {
                display: none;
            }
        }

        body.theme-comic .hud-card {
            border: 3px solid #000;
            box-shadow: 5px 5px 0px #000;
            background: #fff;
            color: #000;
            border-radius: 0;
        }

        body.theme-comic .hud-card:hover {
            transform: translate(-4px, -4px);
            box-shadow: 9px 9px 0px #000;
            background: #ffff00;
        }

        body.theme-comic h1,
        body.theme-comic h2 {
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 3px 3px 0px #ccc;
            font-weight: 900;
        }

        body.theme-comic .text-gray-400,
        body.theme-comic .text-gray-500,
        body.theme-comic .text-gray-600 {
            color: #333 !important;
        }

        /* 3. SPACE THEME */
        body.theme-space {
            --main-color: #aaddff;
            --secondary-color: #6644aa;
            --dark-bg: #050510;
            --glass: rgba(10, 10, 30, 0.6);
            --glitch-red: #ff00cc;
            --glitch-cyan: #00ffff;
            --bg-gradient: radial-gradient(circle at center, #1a1a40 0%, #000000 100%);
        }

        /* Space Layout Overrides */
        body.theme-space .container {
            max-width: 900px;
            margin: 0 auto;
        }

        body.theme-space nav {
            justify-content: center;
            border-bottom: 1px solid rgba(100, 200, 255, 0.3);
        }

        body.theme-space nav ul {
            margin-left: 2rem;
        }

        body.theme-space #hero {
            align-items: center;
            text-align: center;
        }

        body.theme-space #hero h1 {
            text-shadow: 0 0 20px var(--main-color);
        }

        body.theme-space .hud-card {
            border: 1px solid rgba(100, 200, 255, 0.3);
            box-shadow: 0 0 20px rgba(100, 100, 255, 0.2);
            background: rgba(10, 10, 30, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 12px;
        }

        body.theme-space .hud-card:hover {
            box-shadow: 0 0 40px rgba(0, 200, 255, 0.4);
            border-color: #fff;
            transform: scale(1.02);
        }

        /* --- COMMON STYLES --- */
        .glitch {
            position: relative;
            color: var(--main-color);
            font-size: 3rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        /* Create the duplicate layers */
        .glitch::before,
        .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-bg);
            opacity: 0.8;
        }

        /* Red Layer */
        .glitch::before {
            left: 2px;
            text-shadow: -2px 0 var(--glitch-red);
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim 4s infinite linear alternate-reverse;
        }

        /* Cyan Layer */
        .glitch::after {
            left: -2px;
            text-shadow: 2px 0 var(--glitch-cyan);
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim2 4s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim {
            0% {
                clip: rect(30px, 9999px, 10px, 0);
                transform: translate(2px, 0);
            }

            5% {
                clip: rect(80px, 9999px, 90px, 0);
                transform: translate(-2px, 0);
            }

            10% {
                clip: rect(10px, 9999px, 60px, 0);
            }

            15% {
                clip: rect(50px, 9999px, 20px, 0);
            }

            20% {
                clip: rect(10px, 9999px, 100px, 0);
            }

            100% {
                clip: rect(90px, 9999px, 5px, 0);
            }
        }

        @keyframes glitch-anim2 {
            0% {
                clip: rect(10px, 9999px, 80px, 0);
                transform: translate(-2px, 0);
            }

            20% {
                clip: rect(90px, 9999px, 10px, 0);
                transform: translate(2px, 0);
            }

            40% {
                clip: rect(40px, 9999px, 70px, 0);
            }

            60% {
                clip: rect(20px, 9999px, 50px, 0);
            }

            80% {
                clip: rect(60px, 9999px, 30px, 0);
            }

            100% {
                clip: rect(50px, 9999px, 90px, 0);
            }
        }

        /* HUD Card */
        .hud-card {
            background: var(--glass);
            border: 1px solid var(--main-color);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(4px);
            position: relative;
            transition: all 0.3s ease;
        }

        .hud-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            width: 10px;
            height: 10px;
            border-top: 2px solid var(--main-color);
            border-left: 2px solid var(--main-color);
        }

        .hud-card::after {
            content: '';
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 10px;
            height: 10px;
            border-bottom: 2px solid var(--main-color);
            border-right: 2px solid var(--main-color);
        }

        .hud-card:hover {
            box-shadow: -2px 2px 0px var(--glitch-cyan), 2px -2px 0px var(--glitch-red);
            transform: translateY(-5px);
            background: rgba(20, 20, 20, 0.9);
            border-color: #fff;
        }

        /* Blinking Cursor */
        .cursor {
            display: inline-block;
            width: 10px;
            height: 1.2em;
            background-color: var(--main-color);
            animation: blink 1s step-end infinite;
            vertical-align: middle;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        /* Boot Loader styles */
        #boot-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
        }

        #boot-console {
            width: 80%;
            max-width: 600px;
            height: 300px;
            overflow: hidden;
            padding: 20px;
            border: 1px solid var(--secondary-color);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
            background: rgba(0, 0, 0, 0.8);
            position: relative;
        }

        .console-line {
            line-height: 1.2;
            margin-bottom: 2px;
            white-space: nowrap;
        }

        .loader-bar {
            width: 80%;
            max-width: 600px;
            height: 4px;
            background: #222;
            margin-top: 20px;
            position: relative;
        }

        .loader-progress {
            height: 100%;
            background: var(--main-color);
            width: 0%;
            box-shadow: 0 0 10px var(--main-color);
            transition: width 0.1s;
        }

        .flicker {
            animation: flicker-anim 0.05s infinite alternate;
        }

        @keyframes flicker-anim {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }

            100% {
                opacity: 1;
            }
        }

        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(0, 0, 0, 0.3) 50%, rgba(0, 0, 0, 0.3));
            background-size: 100% 3px;
            z-index: 999;
            pointer-events: none;
            opacity: 0.15;
        }

        ::selection {
            background: var(--glitch-red);
            color: white;
        }

        .binary-glitch {
            display: inline-block;
            font-family: 'VT323', monospace;
            font-size: 1.5em;
            color: var(--glitch-cyan);
            text-shadow: 0 0 5px var(--glitch-cyan);
        }

        /* Hidden Canvas for Fingerprinting */
        #fingerprint-canvas {
            display: none;
        }

        /* Project Gallery Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            position: relative;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            background: var(--glass);
            border: 1px solid var(--main-color);
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            color: var(--main-color);
            font-size: 24px;
            cursor: pointer;
            z-index: 10;
            background: none;
            border: none;
            font-family: 'VT323', monospace;
        }

        /* Carousel Styles */
        .carousel-container {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        .carousel-image-wrapper {
            width: 100%;
            max-height: 70vh;
            display: flex;
            justify-content: center;
            overflow: hidden;
            border: 1px solid #333;
        }

        .carousel-image {
            max-width: 100%;
            max-height: 70vh;
            object-fit: contain;
            display: block;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: 1px solid var(--main-color);
            padding: 10px 15px;
            cursor: pointer;
            font-size: 24px;
            z-index: 5;
            transition: all 0.3s ease;
        }

        .carousel-nav:hover {
            background: var(--main-color);
            color: black;
        }

        .carousel-prev {
            left: 10px;
        }

        .carousel-next {
            right: 10px;
        }

        .carousel-counter {
            margin-top: 10px;
            font-family: 'VT323', monospace;
            font-size: 1.2rem;
            color: var(--secondary-color);
        }
    </style>
</head>

<body>
    <!-- Boot Screen -->
    <div id="boot-screen">
        <div id="boot-console">
            <div id="console-output"></div>
        </div>
        <div class="loader-bar">
            <div id="loader-progress" class="loader-progress"></div>
        </div>
        <div id="boot-text" class="mt-4 text-green-500 font-bold"></div>
    </div>

    <!-- Background Canvas -->
    <div id="canvas-container"></div>
    <div class="scanlines"></div>

    <!-- Hidden Canvas for Fingerprinting -->
    <canvas id="fingerprint-canvas" width="200" height="50"></canvas>

    <!-- Main Content -->
    <div class="relative z-10 container mx-auto px-6 py-12">
        <!-- Navigation -->
        <nav class="flex justify-between items-center mb-16 border-b border-gray-800 pb-4">
            <div class="text-2xl font-bold tracking-widest glitch" data-text="NOW.YOU.SEE_ME">NOW.YOU.SEE_ME</div>
            <ul class="flex space-x-6 text-sm">
                <li><a href="#hero" class="hover:text-white text-gray-500 transition-colors">[HOME]</a></li>
                <li><a href="#projects" class="hover:text-white text-gray-500 transition-colors">[PROJECTS]</a></li>
                <li><a href="#contact" class="hover:text-white text-gray-500 transition-colors">[CONTACT]</a></li>
            </ul>
        </nav>

        <!-- Hero Section -->
        <section id="hero" class="mb-24 flex flex-col items-start justify-center min-h-[60vh]">
            <div class="text-sm text-gray-500 mb-2 font-mono">:: USER_ID: GUEST_01 ::</div>
            <h1 class="text-6xl md:text-8xl font-bold mb-4 leading-tight">
                HELLO, I AM <br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-500">A <span
                        id="typewriter"></span><span class="cursor"></span></span>
            </h1>
            <p class="text-xl text-gray-400 max-w-2xl mb-8">
                Building digital experiences at the intersection of design and technology.
                Specialized in high-performance web applications and immersive interfaces.
            </p>
            <div class="flex space-x-4">
                <button onclick="switchTheme()"
                    class="px-8 py-3 border border-white hover:bg-white hover:text-black transition-all duration-300 font-bold group relative overflow-hidden">
                    <span class="relative z-10">EXPLORE_THEMES()</span>
                    <div
                        class="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-20 translate-x-[-100%] group-hover:animate-shine">
                    </div>
                </button>
            </div>
        </section>

        <div id="binary-text-container"
            class="font-mono text-xs text-gray-600 leading-tight overflow-hidden h-32 opacity-50">
            <p>01010111 01000101 01001100 01000011</p>
            <p>01001111 01001101 01000101 00100000</p>
            <p>01010100 01001111 00100000 01001101</p>
            <p>01011001 00100000 01010111 01001111</p>
            <p>01010010 01001100 01000100 00101110</p>
        </div>

        <!-- Projects Section -->
        <section id="projects" class="mb-24">
            <h2 class="text-4xl font-bold mb-12 flex items-center">
                <span class="text-2xl mr-4 text-gray-600">02.</span>
                :: PROJECTS ::
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Project 1 -->
                <div class="hud-card p-6 group">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">Blog</h3>
                        <span class="text-xs border border-gray-600 px-2 py-1 rounded">v1.0</span>
                    </div>
                    <p class="text-gray-400 mb-6 text-sm">
                        This blog is my journey through hacking, trading, coding, and technology. I write about lessons
                        learned, experiments, and ideas that connect my passion for security, programming, and financial
                        markets with the fast-changing world of tech
                    </p>
                    <div class="flex space-x-2 mb-6 text-xs text-gray-500 font-mono">
                        <span>[VUE]</span>
                        <span>[TAILWIND]</span>
                    </div>
                    <a href="https://blog.nowyouseeme.space/"
                        class="block w-full py-2 border border-gray-600 text-gray-400 hover:border-white hover:text-white hover:bg-gray-900 transition-colors text-sm font-bold text-center">
                        > ACCESS
                    </a>
                </div>

                <!-- Project 2: DeepJaVul -->
                <div class="hud-card p-6 group">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">DeepJaVul</h3>
                        <span class="text-xs border border-gray-600 px-2 py-1 rounded">v2.4</span>
                    </div>
                    <p class="text-gray-400 mb-6 text-sm">
                        Advanced vulnerability scanner and penetration testing framework.
                        Automates detection of security flaws in web applications.
                    </p>
                    <div class="flex space-x-2 mb-6 text-xs text-gray-500 font-mono">
                        <span>[PYTHON]</span>
                        <span>[VUE]</span>
                        <span>[AI]</span>
                    </div>
                    <button onclick="openProjectGallery('project2')"
                        class="w-full py-2 border border-gray-600 text-gray-400 hover:border-white hover:text-white hover:bg-gray-900 transition-colors text-sm font-bold">
                        > ACCESS
                    </button>
                </div>

                <!-- Project 3: Backtest System -->
                <div class="hud-card p-6 group">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">Backtest System</h3>
                        <span class="text-xs border border-gray-600 px-2 py-1 rounded">v3.1</span>
                    </div>
                    <p class="text-gray-400 mb-6 text-sm">
                        High-frequency trading backtesting engine.
                        Simulates market conditions to validate trading strategies with historical data.
                    </p>
                    <div class="flex space-x-2 mb-6 text-xs text-gray-500 font-mono">
                        <span>[PYTHON]</span>
                        <span>[VUE]</span>
                    </div>
                    <button onclick="openProjectGallery('project3')"
                        class="w-full py-2 border border-gray-600 text-gray-400 hover:border-white hover:text-white hover:bg-gray-900 transition-colors text-sm font-bold">
                        > ACCESS
                    </button>
                </div>

                <!-- Project 4: TradingOS -->
                <div class="hud-card p-6 group">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">TradingOS</h3>
                        <span class="text-xs border border-gray-600 px-2 py-1 rounded">v0.9</span>
                    </div>
                    <p class="text-gray-400 mb-6 text-sm">
                        Comprehensive operating system for traders.
                        Integrates charting, execution, and news analysis into a single dashboard.
                    </p>
                    <div class="flex space-x-2 mb-6 text-xs text-gray-500 font-mono">
                        <span>[VUE]</span>
                        <span>[PYTHON]</span>
                    </div>
                    <button onclick="openProjectGallery('project4')"
                        class="w-full py-2 border border-gray-600 text-gray-400 hover:border-white hover:text-white hover:bg-gray-900 transition-colors text-sm font-bold">
                        > ACCESS
                    </button>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="mb-12">
            <div class="hud-card p-8 text-center">
                <h2 class="text-3xl font-bold mb-4">:: ENCRYPTED_CHANNEL ::</h2>
                <p class="text-gray-400 mb-8">
                    Secure communication line available.
                    Send your inquiries through the encrypted network.
                </p>
                <a href="mailto:hacker@system.root"
                    class="inline-block px-8 py-3 bg-white text-black font-bold hover:bg-gray-200 transition-colors">
                    SEND_MESSAGE()
                </a>
            </div>
        </section>
    </div>

    <!-- Project Gallery Modal (Carousel) -->
    <div id="project-modal" class="modal-overlay" onclick="closeProjectGallery(event)">
        <div class="modal-content">
            <button class="modal-close" onclick="closeProjectGallery(event)">[X]</button>
            <h2 class="text-2xl font-bold mb-4 text-center w-full border-b border-gray-800 pb-2">:: PROJECT_GALLERY ::
            </h2>

            <div class="carousel-container">
                <button class="carousel-nav carousel-prev" onclick="prevImage()">&#10094;</button>

                <div class="carousel-image-wrapper">
                    <img id="modal-image" class="carousel-image" src="" alt="Project Screenshot">
                </div>

                <button class="carousel-nav carousel-next" onclick="nextImage()">&#10095;</button>
            </div>

            <div id="image-counter" class="carousel-counter">1 / 1</div>
        </div>
    </div>

    <script>
        // --- SCENE MANAGER (Three.js) ---
        const SceneManager = {
            scene: null,
            camera: null,
            renderer: null,
            objects: [],
            animationId: null,

            init: function () {
                this.scene = new THREE.Scene();
                this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                this.renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                this.renderer.setPixelRatio(window.devicePixelRatio);

                const container = document.getElementById('canvas-container');
                container.innerHTML = '';
                container.appendChild(this.renderer.domElement);

                window.addEventListener('resize', () => {
                    this.camera.aspect = window.innerWidth / window.innerHeight;
                    this.camera.updateProjectionMatrix();
                    this.renderer.setSize(window.innerWidth, window.innerHeight);
                });
            },

            clear: function () {
                while (this.scene.children.length > 0) {
                    this.scene.remove(this.scene.children[0]);
                }
                this.objects = [];
            },

            // THEME 1: COOL (Wireframe Icosahedron)
            loadCoolTheme: function () {
                this.clear();
                this.scene.fog = new THREE.FogExp2(0x000000, 0.02);
                this.camera.position.z = 5;

                const geometry = new THREE.IcosahedronGeometry(2, 1);
                const material = new THREE.MeshBasicMaterial({ color: 0xffffff, wireframe: true, transparent: true, opacity: 0.15 });
                const core = new THREE.Mesh(geometry, material);
                this.scene.add(core);
                this.objects.push({ mesh: core, rotX: 0.002, rotY: 0.005 });

                const innerGeo = new THREE.IcosahedronGeometry(1, 0);
                const innerMat = new THREE.MeshBasicMaterial({ color: 0x222222, wireframe: true });
                const innerCore = new THREE.Mesh(innerGeo, innerMat);
                this.scene.add(innerCore);
                this.objects.push({ mesh: innerCore, rotX: -0.005, rotY: -0.01 });

                // Particles
                const particlesGeometry = new THREE.BufferGeometry();
                const particlesCount = 700;
                const posArray = new Float32Array(particlesCount * 3);
                for (let i = 0; i < particlesCount * 3; i++) posArray[i] = (Math.random() - 0.5) * 25;
                particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
                const particlesMaterial = new THREE.PointsMaterial({ size: 0.04, color: 0xffffff, transparent: true, opacity: 0.6 });
                const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
                this.scene.add(particlesMesh);
                this.objects.push({ mesh: particlesMesh, rotX: 0.0001, rotY: 0.0001 });
            },

            // THEME 2: COMIC (Floating Cubes)
            loadComicTheme: function () {
                this.clear();
                this.scene.fog = null;
                this.camera.position.z = 8;

                // Create floating cubes
                for (let i = 0; i < 15; i++) {
                    const size = Math.random() * 1.0 + 0.5;
                    const geometry = new THREE.BoxGeometry(size, size, size);
                    const colors = [0xff0055, 0x0099ff, 0xffff00, 0x000000];
                    const color = colors[Math.floor(Math.random() * colors.length)];

                    const material = new THREE.MeshBasicMaterial({ color: color });
                    const cube = new THREE.Mesh(geometry, material);

                    const edges = new THREE.EdgesGeometry(geometry);
                    const line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: 0x000000, linewidth: 2 }));
                    cube.add(line);

                    cube.position.set((Math.random() - 0.5) * 15, (Math.random() - 0.5) * 15, (Math.random() - 0.5) * 5);
                    this.scene.add(cube);
                    this.objects.push({
                        mesh: cube,
                        rotX: Math.random() * 0.02,
                        rotY: Math.random() * 0.02
                    });
                }
            },

            // THEME 3: SPACE (Warp Speed)
            loadSpaceTheme: function () {
                this.clear();
                this.scene.fog = new THREE.FogExp2(0x0b0b1e, 0.002);
                this.camera.position.z = 1000;

                const starGeo = new THREE.BufferGeometry();
                const starCount = 6000;
                const posArray = new Float32Array(starCount * 3);
                for (let i = 0; i < starCount * 3; i++) {
                    posArray[i] = (Math.random() - 0.5) * 600;
                }
                starGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
                const starMat = new THREE.PointsMaterial({
                    color: 0xaaaaaa,
                    size: 0.7,
                    transparent: true
                });
                const starMesh = new THREE.Points(starGeo, starMat);
                this.scene.add(starMesh);
                this.objects.push({ mesh: starMesh, type: 'stars' });
            },

            animate: function () {
                this.animationId = requestAnimationFrame(this.animate.bind(this));

                this.objects.forEach(obj => {
                    if (obj.type === 'stars') {
                        const positions = obj.mesh.geometry.attributes.position.array;
                        for (let i = 2; i < positions.length; i += 3) {
                            positions[i] += 3;
                            if (positions[i] > 200) positions[i] = -400;
                        }
                        obj.mesh.geometry.attributes.position.needsUpdate = true;
                        obj.mesh.rotation.z += 0.0005;
                    } else {
                        if (obj.rotX) obj.mesh.rotation.x += obj.rotX;
                        if (obj.rotY) obj.mesh.rotation.y += obj.rotY;
                    }
                });

                this.renderer.render(this.scene, this.camera);
            }
        };

        // --- UTILITY: Simple Hashing Function (SHA-256 Mock) ---
        function hashString(str) {
            let hash = 2166136261;
            for (let i = 0; i < str.length; i++) {
                hash ^= str.charCodeAt(i);
                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);
            }
            return (hash >>> 0).toString(16).toUpperCase();
        }

        // --- CANVAS FINGERPRINTING LOGIC ---
        function generateCanvasFingerprint() {
            const canvas = document.getElementById('fingerprint-canvas');
            if (!canvas) return "ERROR_CANVAS_MISSING";
            const ctx = canvas.getContext('2d');
            ctx.textBaseline = "alphabetic";
            ctx.fillStyle = "#f60";
            ctx.font = "14pt 'Arial'";
            ctx.fillText("System.Trace_v1.0.1", 2, 15);
            ctx.fillStyle = "rgba(10, 200, 200, 0.5)";
            ctx.font = "18pt 'Times New Roman'";
            ctx.fillText("Evasion:12-34-56", 4, 45);
            ctx.beginPath();
            ctx.arc(100, 30, 20, 0, Math.PI * 2, false);
            ctx.closePath();
            ctx.fillStyle = "rgb(120, 10, 200)";
            ctx.fill();
            const dataURL = canvas.toDataURL();
            return hashString(dataURL);
        }

        // --- USER INFO TRACE FUNCTION ---
        function fetchUserInfo() {
            const ipApiUrl = 'https://ipapi.co/json/';
            const ipElement = document.getElementById('ip-address');
            const locationElement = document.getElementById('location');
            const ispElement = document.getElementById('isp');
            const osElement = document.getElementById('os-platform');
            const browserElement = document.getElementById('browser');
            const cpuElement = document.getElementById('cpu-cores');
            const timezoneElement = document.getElementById('timezone');
            const hashElement = document.getElementById('fingerprint-hash');
            const statusElement = document.getElementById('trace-status');

            const userAgent = navigator.userAgent;
            let browserName = "Unknown";
            let osPlatform = navigator.platform || "Unknown OS";

            if (userAgent.includes("Chrome") && !userAgent.includes("Edg")) {
                browserName = "Chrome";
            } else if (userAgent.includes("Firefox")) {
                browserName = "Firefox";
            } else if (userAgent.includes("Safari") && !userAgent.includes("Chrome")) {
                browserName = "Safari";
            } else if (userAgent.includes("Edg")) {
                browserName = "Edge";
            }

            const cpuCores = navigator.hardwareConcurrency || "N/A";
            const userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone || "N/A";

            if (osElement) osElement.textContent = osPlatform;
            if (browserElement) browserElement.textContent = browserName;
            if (cpuElement) cpuElement.textContent = `${cpuCores} Cores`;
            if (timezoneElement) timezoneElement.textContent = userTimezone;

            const fingerprint = generateCanvasFingerprint();
            if (hashElement) hashElement.textContent = fingerprint;

            fetch(ipApiUrl)
                .then(response => {
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    return response.json();
                })
                .then(data => {
                    if (data.ip) {
                        if (ipElement) ipElement.textContent = data.ip;
                        let locationStr = data.city;
                        if (data.region) locationStr += `, ${data.region}`;
                        if (data.country_name) locationStr += `, ${data.country_name}`;
                        if (locationElement) locationElement.textContent = locationStr || "Unknown Location";
                        if (ispElement) ispElement.textContent = data.org || "Unknown ISP";
                        if (statusElement) {
                            statusElement.textContent = "CONNECTED (Secure)";
                            statusElement.classList.remove('text-yellow-500', 'animate-pulse');
                            statusElement.classList.add('text-green-500');
                        }
                    } else {
                        throw new Error("Invalid IP API response.");
                    }
                })
                .catch(error => {
                    console.error("Error fetching IP info:", error);
                    if (ipElement) ipElement.textContent = "ERROR_FETCHING_IP";
                    if (locationElement) locationElement.textContent = "LOC_DATA_UNAVAILABLE";
                    if (ispElement) ispElement.textContent = "ISP_DATA_UNAVAILABLE";
                    if (statusElement) {
                        statusElement.textContent = "FAILED (Check Firewall)";
                        statusElement.classList.remove('text-yellow-500', 'animate-pulse');
                        statusElement.classList.add('text-red-500');
                    }
                });
        }

        // --- BOOT SEQUENCE ---
        const bootScreen = document.getElementById('boot-screen');
        const loaderProgress = document.getElementById('loader-progress');
        const bootText = document.getElementById('boot-text');
        const consoleOutput = document.getElementById('console-output');
        const bootConsole = document.getElementById('boot-console');

        const fullBootMessages = [
            "BIOS: Booting from Hard Disk...",
            "INIT: Starting kernel v5.15.0-91-generic...",
            "NETWORK: Interface 'eth0' detected. DHCP assigned.",
            "SECURITY: Accessing user artifacts.db...",
            "SECURITY: SSH: AUTH_SUCCESS. Privileges ESCALATED.",
            "FILESYS: Mounting virtual partition /dev/vda1 on /...",
            "HACKER: Initializing stealth module 'Phantom'",
            "HACKER: Redirecting traffic through TOR exit node...",
            "PROCESS: Allocating 4096MB memory pool...",
            "SYSTEM: All modules loaded. Running final checks...",
        ];

        let currentStep = 0;
        const totalSteps = fullBootMessages.length;

        function typeConsoleLine(line, color = 'text-gray-400') {
            return new Promise(resolve => {
                const lineElement = document.createElement('div');
                lineElement.className = `console-line ${color}`;
                consoleOutput.appendChild(lineElement);
                let charIndex = 0;
                const typeChar = () => {
                    if (charIndex < line.length) {
                        lineElement.textContent += line.charAt(charIndex);
                        charIndex++;
                        bootConsole.scrollTop = bootConsole.scrollHeight;
                        setTimeout(typeChar, 3);
                    } else {
                        if (line.includes('...')) {
                            setTimeout(() => {
                                lineElement.innerHTML = line.replace('...', `... <span class="text-green-500">[OK]</span>`);
                                currentStep++;
                                loaderProgress.style.width = `${(currentStep / totalSteps) * 100}%`;
                                resolve();
                            }, 10);
                        } else {
                            currentStep++;
                            loaderProgress.style.width = `${(currentStep / totalSteps) * 100}%`;
                            resolve();
                        }
                    }
                };
                typeChar();
            });
        }

        async function runBootSequence() {
            await typeConsoleLine(">> Initializing secure system boot...", 'text-yellow-500');
            await typeConsoleLine(">> Checking hardware integrity...", 'text-white');
            for (const message of fullBootMessages) {
                await typeConsoleLine(message, message.includes('HACKER') || message.includes('SECURITY') ? 'text-cyan-400' : 'text-gray-400');
            }
            currentStep = totalSteps;
            loaderProgress.style.width = '100%';
            bootText.innerText = ">> ACCESS GRANTED. STARTING PORTFOLIO INTERFACE...";
            bootText.style.color = "var(--glitch-cyan)";
            await typeConsoleLine("CMD: ./portfolio_interface -init", 'text-white');
            await typeConsoleLine("OUTPUT: Portfolio rendered successfully.", 'text-green-500');
            bootScreen.classList.add('flicker');
            setTimeout(() => {
                bootScreen.style.transition = 'opacity 0.3s ease-out';
                bootScreen.style.opacity = '0';
                setTimeout(() => {
                    bootScreen.style.display = 'none';
                    bootScreen.style.pointerEvents = 'none';
                    bootScreen.classList.remove('flicker');
                    initTypewriter();
                    startBinaryGlitch();
                    startFullBinaryGlitch();
                    fetchUserInfo();
                }, 300);
            }, 500);
        }

        // --- TYPEWRITER EFFECT ---
        const texts = ["WEB DEVELOPER", "CREATIVE CODER", "HACKER", "TRADER", "PENTESTER"];
        let count = 0;
        let index = 0;
        let currentText = "";
        let letter = "";

        function initTypewriter() {
            (function type() {
                if (count === texts.length) {
                    count = 0;
                }
                currentText = texts[count];
                letter = currentText.slice(0, ++index);
                document.getElementById("typewriter").textContent = letter;
                if (letter.length === currentText.length) {
                    count++;
                    index = 0;
                    setTimeout(type, 2000);
                } else {
                    setTimeout(type, 100);
                }
            })();
        }

        // --- BINARY GLITCH EFFECT ---
        const binaryDigits = [document.getElementById('binary-digit-1'), document.getElementById('binary-digit-2')];
        function getRandomBinary() { return Math.floor(Math.random() * 2).toString(); }
        function getRandomHex() { const hexChars = '0123456789ABCDEF'; return hexChars.charAt(Math.floor(Math.random() * hexChars.length)); }
        function startBinaryGlitch() {
            if (binaryDigits[0]) setInterval(() => { binaryDigits[0].textContent = getRandomBinary(); }, 50);
            if (binaryDigits[1]) setInterval(() => { binaryDigits[1].textContent = getRandomHex(); }, 80);
        }

        // --- FULL BINARY TEXT BLOCK GLITCH EFFECT ---
        const originalBinaryLines = [
            "01010111 01000101 01001100 01000011",
            "01001111 01001101 01000101 00100000",
            "01010100 01001111 00100000 01001101",
            "01011001 00100000 01010111 01001111",
            "01010010 01001100 01000100 00101110"
        ];

        function glitchLine(originalLine) {
            let glitchedLine = originalLine.split('');
            const flips = Math.floor(Math.random() * 3) + 1;
            for (let i = 0; i < flips; i++) {
                let randomIndex = Math.floor(Math.random() * glitchedLine.length);
                let char = glitchedLine[randomIndex];
                if (char === '0') {
                    glitchedLine[randomIndex] = '<span class="text-white opacity-80">1</span>';
                } else if (char === '1') {
                    glitchedLine[randomIndex] = '<span class="text-white opacity-80">0</span>';
                }
            }
            return glitchedLine.join('');
        }

        function startFullBinaryGlitch() {
            const container = document.getElementById('binary-text-container');
            if (!container) return;
            const lines = container.querySelectorAll('p');
            setInterval(() => {
                lines.forEach((p, index) => {
                    const originalText = originalBinaryLines[index];
                    const glitchedContent = glitchLine(originalText);
                    p.innerHTML = glitchedContent;
                });
            }, 150);
        }

        // --- THEME SWITCHER LOGIC ---
        const themes = ['', 'theme-comic', 'theme-space'];
        let currentThemeIndex = 0;

        function switchTheme() {
            currentThemeIndex = (currentThemeIndex + 1) % themes.length;
            document.body.className = themes[currentThemeIndex];

            // Switch 3D Scene
            if (currentThemeIndex === 0) SceneManager.loadCoolTheme();
            else if (currentThemeIndex === 1) SceneManager.loadComicTheme();
            else if (currentThemeIndex === 2) SceneManager.loadSpaceTheme();
        }

        // --- MODAL & CAROUSEL LOGIC ---
        const projectData = {
            'project2': ['images/Screenshot_1.png', 'images/Screenshot_2.png', 'images/Screenshot_3.png'], // DeepJaVul
            'project3': ['images/Screenshot_5.png', 'images/Screenshot_6.png'], // Backtest System
            'project4': ['images/Screenshot_4.png']  // TradingOS
        };

        let currentImages = [];
        let currentImageIndex = 0;

        function openProjectGallery(projectId) {
            const modal = document.getElementById('project-modal');
            const modalImage = document.getElementById('modal-image');
            const counter = document.getElementById('image-counter');
            const prevBtn = document.querySelector('.carousel-prev');
            const nextBtn = document.querySelector('.carousel-next');

            if (projectData[projectId]) {
                currentImages = projectData[projectId];
                currentImageIndex = 0;
                modalImage.src = currentImages[0];
                counter.textContent = `1 / ${currentImages.length}`;

                if (currentImages.length > 1) {
                    prevBtn.style.display = 'block';
                    nextBtn.style.display = 'block';
                } else {
                    prevBtn.style.display = 'none';
                    nextBtn.style.display = 'none';
                }

                modal.style.display = 'flex';
                void modal.offsetWidth;
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            } else {
                console.error("Project ID not found:", projectId);
            }
        }

        function closeProjectGallery(event) {
            if (event.target.id === 'project-modal' || event.target.classList.contains('modal-close')) {
                const modal = document.getElementById('project-modal');
                modal.classList.remove('active');
                setTimeout(() => {
                    modal.style.display = 'none';
                    document.body.style.overflow = '';
                    currentImages = []; // Reset
                }, 300);
            }
        }

        function showImage(index) {
            const modalImage = document.getElementById('modal-image');
            const counter = document.getElementById('image-counter');

            if (index < 0) {
                currentImageIndex = currentImages.length - 1;
            } else if (index >= currentImages.length) {
                currentImageIndex = 0;
            } else {
                currentImageIndex = index;
            }

            modalImage.src = currentImages[currentImageIndex];
            counter.textContent = `${currentImageIndex + 1} / ${currentImages.length}`;
        }

        function nextImage() {
            if (currentImages.length > 1) {
                showImage(currentImageIndex + 1);
            }
        }

        function prevImage() {
            if (currentImages.length > 1) {
                showImage(currentImageIndex - 1);
            }
        }

        // Init
        window.onload = function () {
            SceneManager.init();
            SceneManager.loadCoolTheme(); // Default
            SceneManager.animate();
            runBootSequence();
        };
    </script>
</body>

</html>